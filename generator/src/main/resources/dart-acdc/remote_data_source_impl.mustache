// AUTO-GENERATED FILE - DO NOT EDIT
import 'package:dio/dio.dart';
import 'package:dart_acdc/dart_acdc.dart';
{{#imports}}
import '{{.}}';
{{/imports}}
{{#operations}}
import 'package:{{pubName}}/remote_data_sources/{{classname}}_remote_data_source.dart';

/// Implementation of [{{classname}}RemoteDataSource] using Dio
class {{classname}}RemoteDataSourceImpl implements {{classname}}RemoteDataSource {
  final Dio _dio;

  {{classname}}RemoteDataSourceImpl(this._dio);

{{#operation}}
  @override
  Future<{{#returnType}}{{{returnType}}}{{/returnType}}{{^returnType}}void{{/returnType}}> {{operationId}}({{#allParams}}{{^-first}}, {{/-first}}{{#isPathParam}}{{{dataType}}} {{paramName}}{{/isPathParam}}{{#isBodyParam}}{{{dataType}}} {{paramName}}{{/isBodyParam}}{{#isQueryParam}}{{#required}}{required {{{dataType}}} {{paramName}}}{{/required}}{{^required}}{{{dataType}}}? {{paramName}}{{/required}}{{/isQueryParam}}{{#isHeaderParam}}{{#required}}{required {{{dataType}}} {{paramName}}}{{/required}}{{^required}}{{{dataType}}}? {{paramName}}{{/required}}{{/isHeaderParam}}{{#isFormParam}}{{#required}}{{{dataType}}} {{paramName}}{{/required}}{{^required}}{{{dataType}}}? {{paramName}}{{/required}}{{/isFormParam}}{{/allParams}}) async {
{{#hasQueryParams}}
    // Build query parameters, filtering out nulls
    final queryParameters = <String, dynamic>{};
{{#queryParams}}
    if ({{paramName}} != null) {
      queryParameters['{{baseName}}'] = {{paramName}};
    }
{{/queryParams}}

{{/hasQueryParams}}
{{#hasHeaderParams}}
    // Build header parameters
    final headers = <String, dynamic>{};
{{#headerParams}}
    if ({{paramName}} != null) {
      headers['{{baseName}}'] = {{paramName}};
    }
{{/headerParams}}

{{/hasHeaderParams}}
{{#hasFormParams}}
    // Build form data for multipart/form-data request
    final formData = FormData.fromMap({
{{#formParams}}
      '{{baseName}}': {{paramName}},
{{/formParams}}
    });

{{/hasFormParams}}
    final response = await _dio.{{httpMethod}}(
      '{{path}}'{{#pathParams}}.replaceAll('{' + '{{baseName}}' + '}', {{paramName}}.toString()){{/pathParams}},
{{#hasQueryParams}}
      queryParameters: queryParameters,
{{/hasQueryParams}}
{{#hasBodyParam}}
{{#bodyParam}}
      data: {{paramName}}.toJson(),
{{/bodyParam}}
{{/hasBodyParam}}
{{#hasFormParams}}
      data: formData,
{{/hasFormParams}}
{{#hasHeaderParams}}
      options: Options(headers: headers),
{{/hasHeaderParams}}
    );

{{#returnType}}
{{#isArray}}
    // Handle List response
    if (response.data is List) {
      return (response.data as List)
          .map((item) => {{{returnBaseType}}}.fromJson(item as Map<String, dynamic>))
          .toList();
    }
    throw AcdcClientException(
      message: 'Expected List response but got: ${response.data.runtimeType}',
      statusCode: response.statusCode ?? 0,
      requestOptions: response.requestOptions,
      originalException: null,
    );
{{/isArray}}
{{^isArray}}
{{#returnTypeIsPrimitive}}
    // Handle primitive response
    return response.data as {{{returnType}}};
{{/returnTypeIsPrimitive}}
{{^returnTypeIsPrimitive}}
    // Handle single object response
    return {{{returnType}}}.fromJson(response.data as Map<String, dynamic>);
{{/returnTypeIsPrimitive}}
{{/isArray}}
{{/returnType}}
  }

{{/operation}}
}
{{/operations}}
