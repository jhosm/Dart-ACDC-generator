# File Upload API

OpenAPI spec for testing multipart file uploads

## Overview

This API client was generated by the [Dart-ACDC OpenAPI Generator](https://github.com/jhosm/Dart-ACDC-generator) for File Upload API.

## Features

- **Authentication (A)**: OAuth 2.1 with automatic token refresh
- **Caching (C)**: Two-tier caching (Memory + Disk) with encryption
- **Debugging (D)**: Configurable logging with sensitive data redaction
- **Client (C)**: Request deduplication, certificate pinning, offline support

## Requirements

- Dart SDK: >=3.0.0 <4.0.0
- Flutter: >=3.10.0

## Installation

Add this package to your `pubspec.yaml`:

```yaml
dependencies:
  file_upload_client: ^1.0.0
```

## Usage

### 1. Run code generation for JSON serialization

After installing the package, generate the necessary JSON serialization code:

```bash
dart run build_runner build
```

### 2. Basic setup

```dart
import 'package:file_upload_client/file_upload_client.dart';
import 'package:file_upload_client/config/config.dart';

void main() {
  // Configure the API client
  final config = AcdcConfig(
    baseUrl: 'https://api.example.com',
    auth: AuthConfig(
      tokenRefreshUrl: 'https://api.example.com/auth/refresh',
    ),
    cache: CacheConfig(
      ttl: Duration(hours: 1),
    ),
    log: LogConfig(
      level: LogLevel.info,
    ),
  );

  // Create the Dio client with ACDC features
  final dio = ApiClient.createDio(config);

  // Create API instances
  final DefaultApiRemoteDataSource defaultApiApi = DefaultApiRemoteDataSourceImpl(dio);

  // Use the APIs
  // Example: await userApi.getUser('user123');
}
```

### 3. Error handling

All API methods may throw `AcdcException` or its subclasses:

```dart
try {
  final result = await api.someMethod();
  print('Success: $result');
} on AcdcAuthException catch (e) {
  print('Authentication error: $e');
} on AcdcNetworkException catch (e) {
  print('Network error: $e');
} on AcdcServerException catch (e) {
  print('Server error: $e');
} on AcdcException catch (e) {
  print('Other ACDC error: $e');
}
```

### 4. Advanced configuration

```dart
final config = AcdcConfig(
  baseUrl: 'https://api.example.com',
  auth: AuthConfig(
    tokenRefreshUrl: 'https://api.example.com/auth/refresh',
    clientId: 'your-client-id',
    clientSecret: 'your-client-secret',
  ),
  cache: CacheConfig(
    ttl: Duration(minutes: 30),
    encryptCache: true,
  ),
  log: LogConfig(
    level: LogLevel.debug,
    redactSensitiveData: true,
  ),
  offline: OfflineConfig(
    failFast: true,
  ),
  security: SecurityConfig(
    certificateFingerprints: [
      'sha256/AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA=',
    ],
  ),
);
```

## Documentation

For more information about the generated API client, please refer to the [Dart-ACDC library documentation](https://github.com/jhosm/Dart-ACDC).
